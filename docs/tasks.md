## チェックリスト

### Vercel Node.js Functions の設定
- [ ] 実装: `maxDuration` を 300 秒に設定
- [ ] テスト: デプロイ後に設定が反映されていることを確認

### GitHub OAuth (`public_repo` スコープ)
- [ ] 実装: OAuth フローの実装
- [ ] テスト: 認可〜トークン取得までの結合テスト

### PR URL 入力画面
- [ ] 実装: PR URL 入力欄と「レビュー」ボタンを配置し、「GitHub で PR を検索」ボタンを設置
- [ ] テスト: URL 形式の検証と各ボタンの動作を確認する E2E テスト

### `GET /api/prs?owner=&repo=` エンドポイント
 - [x] 実装: PR 一覧取得ロジックと API レスポンス整形
 - [x] テスト: 上記ロジックの単体テスト
 - [x] テスト: ルーティングやヘッダー処理を含む結合テスト

### `POST /api/review` エンドポイント
 - [x] 実装: diff 取得・検証ロジックと LLM 呼び出しのリトライ
 - [x] テスト: 上記ロジックの単体テスト
 - [x] テスト: ルーティングと PR 指定エラー処理を含む結合テスト

### diff サイズ上限チェック
- [ ] 実装: 200,000 文字超過で HTTP 413 を返すガードを実装
- [ ] テスト: ガード処理の単体テスト

### OpenAI 呼び出し・リトライ
- [ ] 実装: 失敗時の指数バックオフを実装
- [ ] テスト: リトライ動作の単体テスト

### ログ出力
- [ ] 実装: `openai.tokens_prompt` などのログを出力
- [ ] テスト: 出力内容を確認する単体テスト

### GitHub レート制限対策
- [ ] 実装: 残回数 < 100 で待機し、`X-RateLimit-Reset` から再試行時刻を計算
- [ ] テスト: 上記ロジックの単体テスト

### アクセストークン管理とセキュリティ
- [ ] 実装: トークンをサーバ側で安全に保持し、クライアントから diff を送らない
- [ ] テスト: トークン格納と取扱いを確認する結合テスト

### コスト上限チェック
- [ ] 実装: 1 実行あたりの概算コスト計算と上限超過時の警告表示
- [ ] テスト: 計算ロジックの単体テスト
- [ ] テスト: 警告表示を含む結合テスト

### レビュー実行中 UI
- [ ] 実装: レビュー実行中はスピナーまたはプログレスバーを表示し入力を無効化
- [ ] テスト: ローディング表示と入力無効化を確認する E2E テスト

### レビュー結果の表示 UI
- [ ] 実装: 改善ポイントを一覧表示し「＋ Diff を表示」で差分を展開
- [ ] テスト: 表示と差分展開を確認する E2E テスト

### E2E テストシナリオ
- [ ] OAuth → レビュー実行 → 結果表示の一連の流れを確認
- [ ] 413 エラー時の画面動作を確認
- [ ] レート制限発火時のバックオフ動作を確認
- [ ] OpenAI API をモック化して安定検証
